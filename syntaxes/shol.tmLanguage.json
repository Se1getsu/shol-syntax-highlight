{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Shol",
	"patterns": [
		{
			"include": "#block-comments"
		},
		{
			"include": "#comments"
		},
		{
			"include": "#colony_declarations"
		},
		{
			"include": "#statements"
		}
	],
	"repository": {
		"comments": {
			"patterns": [
				{
                    "name": "comment.line.double-slash.shol",
                    "match": "(//).*$",
                    "captures": {
                        "1": {
                            "name": "punctuation.definition.comment.shol"
                        }
                    }
				}
			]
		},
		"block-comments": {
            "patterns": [
                {
                    "name": "comment.block.shol",
                    "begin": "/\\*",
                    "end": "\\*/",
					"patterns": [
						{
							"include": "#block-comments"
						}
					]
                }
            ]
        },
		"colony_declarations": {
			"patterns": [
				{
					"comment": "Colony Declaration",
					"match": "^([\\*%])([\\p{XID_Start}_]\\p{XID_Continue}*)?",
					"captures": {
						"1": {"name": "storage.type.class.shol"},
						"2": {"name": "entity.name.type.class.shol"}
					}
				}
		]
		},
		"statements": {
			"patterns": [
				{
					"comment": "Rule",
					"begin": "^([\\.\\|])",
					"end": "$",
					"beginCaptures": {
						"1": {"name": "keyword.control.shol"}
					},
					"patterns": [
						{
							"include": "#block-comments"
						},
						{
							"include": "#comments"
						},
						{
							"include": "#capts"
						},
						{
							"include": "#destinations"
						},
						{
							"include": "#commas"
						},
						{
							"include": "#strings"
						}
					]
				},
				{
					"comment": "Macro",
					"begin": "^(@debug|@sleep)\\b",
					"end": "$",
					"beginCaptures": {
						"1": {"name": "keyword.control.shol"}
					},
					"patterns": [
						{
							"include": "#block-comments"
						},
						{
							"include": "#comments"
						},
						{
							"include": "#strings"
						}
					]
				}
			]
		},
		"commas": {
			"patterns": [
				{
					"name": "punctuation.separator.shol",
					"match": ","
				}
			]
		},
		"destinations": {
			"patterns": [
				{
					"match": "(#)([\\p{XID_Start}_]\\p{XID_Continue}*)?",
					"captures": {
						"1": {"name": "keyword.control.shol"},
						"2": {"name": "entity.name.type.class.shol"}
					}
				}
			]
		},
		"capts": {
			"patterns": [
				{
					"name": "variable.other.shol",
					"match": "\\$([\\p{XID_Start}_]\\p{XID_Continue}*)?"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.shol",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.shol",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "string.nonquoted.shol",
					"match": "(\\p{XID_Start}|_)\\p{XID_Continue}*"
				}
			]
		}
	},
	"scopeName": "source.shol"
}